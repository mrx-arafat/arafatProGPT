(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const w={username:"arafat",password:"Arafat@123456",maxAttempts:5,lockoutTime:3e4};let I=0,A=!1,z=null;const U=["üö´ Nice try, but that's not it! Are you even trying?","ü§î Hmm... my grandma could guess better than that!","üòÖ Wrong! Did you try turning your brain off and on again?","üé≠ Impostor detected! The real agent would know the password!","üôà That password is so wrong, even the AI is embarrassed for you!","üîê Access denied! The password fairy says NO!","ü§ñ Beep boop! Human authentication failed. Are you a robot?","üïµÔ∏è Our spy satellites confirm: you're not authorized!","üíÄ That password just died of embarrassment!","üé™ Welcome to the circus of wrong passwords!"],j=["üí° Fun fact: This AI once calculated pi to 1 million digits... just for fun!","üß† Fun fact: The AI has read more books than a library full of bookworms!","üöÄ Fun fact: This AI dreams in binary and speaks in emojis!","üéÆ Fun fact: The AI beat every video game... in its imagination!","üçï Fun fact: If this AI could eat, it would definitely choose pizza!","üåç Fun fact: This AI knows 47 ways to say 'Hello' in alien languages!","üé∏ Fun fact: The AI's favorite band is 'The Debugging Beatles'!","‚òï Fun fact: This AI runs on coffee... wait, that's the developer!","ü¶Ñ Fun fact: The AI believes in unicorns. Don't tell it they're not real!","üé¨ Fun fact: The AI's favorite movie is 'The Matrix'... for obvious reasons!"];function Q(){const e=sessionStorage.getItem("arafatGPT_authenticated")==="true",t=document.getElementById("login-overlay"),n=document.getElementById("app-container");e?(t.classList.add("hidden"),n.style.display="flex",Z()):(t.classList.remove("hidden"),n.style.display="none",X())}function de(e){if(e.preventDefault(),A)return L("‚è∞ Whoa there, speed demon! Take a breather and try again soon!"),!1;const t=document.getElementById("login-username").value.trim().toLowerCase(),n=document.getElementById("login-password").value,o=document.getElementById("login-btn"),s=o.querySelector(".btn-text"),i=o.querySelector(".btn-loading");return s.classList.add("hidden"),i.classList.remove("hidden"),o.disabled=!0,setTimeout(()=>{t===w.username&&n===w.password?ue():me(),s.classList.remove("hidden"),i.classList.add("hidden"),o.disabled=!1},800),!1}function ue(){const e=document.querySelector(".login-container"),t=document.getElementById("login-overlay");sessionStorage.setItem("arafatGPT_authenticated","true"),e.classList.add("success"),L("‚úÖ Welcome, Agent! Initiating neural link...",!0),setTimeout(()=>{t.classList.add("hidden"),document.getElementById("app-container").style.display="flex",Z(),m("üéâ Welcome aboard, Agent Arafat! The AI awaits your commands!","success")},800)}function me(){I++;const e=document.getElementById("login-btn"),t=document.querySelector(".login-container");e.classList.add("shake"),t.style.animation="none",setTimeout(()=>{t.style.animation="",e.classList.remove("shake")},500);const n=U[Math.floor(Math.random()*U.length)];L(n),ge(),I>=w.maxAttempts&&pe(),X()}function L(e,t=!1){const n=document.getElementById("login-error");n.textContent=e,n.style.borderColor=t?"#22c55e":"#ef4444",n.style.background=t?"rgba(34, 197, 94, 0.1)":"rgba(239, 68, 68, 0.1)",n.style.color=t?"#22c55e":"#ef4444",n.classList.add("visible")}function ge(){const e=document.getElementById("attempts-counter"),t=w.maxAttempts-I;t>0?e.textContent=`‚ö†Ô∏è ${t} attempt${t!==1?"s":""} remaining before temporary lockout!`:e.textContent="üîí Too many attempts! Cooling down..."}function pe(){A=!0;const e=document.getElementById("attempts-counter");let t=w.lockoutTime/1e3;L("üîí Slow down there, cowboy! Too many wrong guesses!");const n=()=>{e.textContent=`‚è∞ Try again in ${t} seconds... (Grab some coffee ‚òï)`,t--,t<0&&(clearInterval(z),A=!1,I=0,e.textContent="üîì You're unlocked! Give it another shot!",document.getElementById("login-error").classList.remove("visible"))};n(),z=setInterval(n,1e3)}function X(){const e=document.getElementById("fun-fact"),t=j[Math.floor(Math.random()*j.length)];e.textContent=t}function he(){const e=document.getElementById("login-password"),t=document.getElementById("eye-icon");e.type==="password"?(e.type="text",t.textContent="üôà"):(e.type="password",t.textContent="üëÅÔ∏è")}function fe(){sessionStorage.removeItem("arafatGPT_authenticated"),document.getElementById("login-overlay").classList.remove("hidden"),document.getElementById("app-container").style.display="none",document.getElementById("login-username").value="",document.getElementById("login-password").value="",document.getElementById("login-error").classList.remove("visible"),I=0,m("üëã See you later, Agent! The AI will miss you!","info")}const Y={apiUrl:"https://chat.arafatops.com",defaultModel:"claude-sonnet-4-5",maxTokens:16384,showThinking:!0,autoScroll:!0};let c={...Y},g={},h=null,B=!1,v=null,d=[];document.addEventListener("DOMContentLoaded",()=>{Q()});function Z(){ve(),Ee(),y(),ce(),ye(),Me();const e=localStorage.getItem("lastConversationId");e&&g[e]&&D(e),marked.setOptions({highlight:function(n,o){if(o&&hljs.getLanguage(o))try{return hljs.highlight(n,{language:o}).value}catch{}return hljs.highlightAuto(n).value},breaks:!0,gfm:!0});const t=document.getElementById("message-input");t&&t.addEventListener("input",N)}function ye(){const e=document.getElementById("right-sidebar"),t=document.getElementById("robot-mascot");e&&t&&(e.classList.contains("closed")?t.classList.add("hidden-by-sidebar"):t.classList.remove("hidden-by-sidebar"))}function ve(){const e=localStorage.getItem("arafatChatConfig");e&&(c={...Y,...JSON.parse(e)}),document.getElementById("model-select").value=c.defaultModel,te()}function we(){localStorage.setItem("arafatChatConfig",JSON.stringify(c))}function ee(){document.getElementById("settings-api-url").value=c.apiUrl,document.getElementById("settings-default-model").value=c.defaultModel,document.getElementById("settings-max-tokens").value=c.maxTokens,document.getElementById("settings-show-thinking").checked=c.showThinking,document.getElementById("settings-auto-scroll").checked=c.autoScroll,document.getElementById("settings-modal").classList.add("active")}function M(){document.getElementById("settings-modal").classList.remove("active")}function Ie(){c.apiUrl=document.getElementById("settings-api-url").value.trim(),c.defaultModel=document.getElementById("settings-default-model").value,c.maxTokens=parseInt(document.getElementById("settings-max-tokens").value)||8192,c.showThinking=document.getElementById("settings-show-thinking").checked,c.autoScroll=document.getElementById("settings-auto-scroll").checked,we(),document.getElementById("model-select").value=c.defaultModel,M(),m("Settings saved successfully","success"),ce()}function be(){const e=document.documentElement,n=e.getAttribute("data-theme")==="dark"?"light":"dark";e.setAttribute("data-theme",n),localStorage.setItem("theme",n),te()}function te(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e);const t=document.getElementById("theme-text");t&&(t.textContent=e==="dark"?"Light Mode":"Dark Mode")}function Ee(){const e=localStorage.getItem("arafatChatConversations");e&&(g=JSON.parse(e))}function x(){localStorage.setItem("arafatChatConversations",JSON.stringify(g))}function ke(){return"conv_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function ne(){const e=ke();g[e]={id:e,title:"New Chat",messages:[],createdAt:Date.now(),updatedAt:Date.now()},x(),D(e),y(),Te()}function D(e){h=e,localStorage.setItem("lastConversationId",e);const t=g[e];if(!t)return;const n=document.getElementById("chat-container");n.innerHTML="",t.messages.length===0?n.innerHTML=F():t.messages.forEach(o=>{ae(o.role,o.content,o.images,o.thinking)}),y()}function Ce(e,t){if(t.stopPropagation(),!!confirm("Delete this conversation?")){if(delete g[e],x(),h===e){h=null;const n=document.getElementById("chat-container");n.innerHTML=F()}y(),m("Conversation deleted","success")}}function Le(e,t){if(!g[e])return;let n=t.substring(0,50);t.length>50&&(n+="..."),g[e].title=n,g[e].updatedAt=Date.now(),x(),y()}function y(){const e=document.getElementById("conversations-list"),t=Object.values(g).sort((n,o)=>o.updatedAt-n.updatedAt);if(t.length===0){e.innerHTML='<div style="padding: 20px; text-align: center; color: var(--text-muted); font-size: 14px;">No conversations yet</div>';return}e.innerHTML=t.map(n=>`
        <div class="conversation-item ${n.id===h?"active":""}"
             onclick="loadConversation('${n.id}')">
            <span class="conv-icon">üí¨</span>
            <span class="conv-title">${H(n.title)}</span>
            <button class="conv-delete" onclick="deleteConversation('${n.id}', event)" title="Delete">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="3 6 5 6 21 6"></polyline>
                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                </svg>
            </button>
        </div>
    `).join("")}function xe(){confirm("This will delete ALL conversations. Are you sure?")&&(g={},h=null,localStorage.removeItem("arafatChatConversations"),localStorage.removeItem("lastConversationId"),document.getElementById("chat-container").innerHTML=F(),y(),M(),m("All data cleared","success"))}function Te(){const e=document.getElementById("right-sidebar");e&&e.classList.remove("mobile-visible")}const f={maxSize:20*1024*1024,maxDimension:2048,compressionQuality:.85,supportedTypes:["image/jpeg","image/png","image/gif","image/webp"]};let S=!1;async function Be(e){return new Promise((t,n)=>{const o=new Image,s=document.createElement("canvas"),i=s.getContext("2d");o.onload=()=>{let{width:r,height:a}=o;if(r>f.maxDimension||a>f.maxDimension){const E=Math.min(f.maxDimension/r,f.maxDimension/a);r=Math.round(r*E),a=Math.round(a*E)}s.width=r,s.height=a,i.drawImage(o,0,0,r,a);const u=e.type==="image/png"?"image/png":"image/jpeg",b=s.toDataURL(u,f.compressionQuality);t({type:"base64",media_type:u,data:b.split(",")[1],originalName:e.name,originalSize:e.size,compressedSize:Math.round(b.length*3/4)})},o.onerror=()=>n(new Error("Failed to load image"));const l=new FileReader;l.onload=r=>{o.src=r.target.result},l.onerror=()=>n(new Error("Failed to read file")),l.readAsDataURL(e)})}async function Se(e){if(!e.type.startsWith("image/"))throw new Error("Not an image file");if(!f.supportedTypes.includes(e.type))throw new Error(`Unsupported image type: ${e.type}`);if(e.size>f.maxSize)throw new Error("Image must be less than 20MB");return e.size>1024*1024?await Be(e):new Promise((t,n)=>{const o=new FileReader;o.onload=s=>{const i=s.target.result;t({type:"base64",media_type:e.type,data:i.split(",")[1],originalName:e.name,originalSize:e.size,compressedSize:e.size})},o.onerror=()=>n(new Error("Failed to read file")),o.readAsDataURL(e)})}async function P(e){if(S)return;const t=Array.from(e).filter(o=>o.type.startsWith("image/"));if(t.length===0)return;S=!0,W(!0);let n=0;for(const o of t)try{const s=await Se(o);d.push(s),n++,T()}catch(s){console.error("Image processing error:",s),m(`Failed to process ${o.name}: ${s.message}`,"error")}if(S=!1,W(!1),n>0){const o=d.length>0?` (${d.length} image${d.length>1?"s":""} ready)`:"";m(`${n} image${n>1?"s":""} added${o}`,"success")}}function W(e){let t=document.getElementById("image-processing-indicator");if(e){if(!t){t=document.createElement("div"),t.id="image-processing-indicator",t.className="image-processing-indicator",t.innerHTML=`
                <div class="processing-spinner"></div>
                <span>Processing images...</span>
            `;const n=document.getElementById("image-preview-container");n.parentNode.insertBefore(t,n)}t.classList.add("visible")}else t&&t.classList.remove("visible")}function Ae(e){P(e.target.files),e.target.value=""}function R(e){const t=e.clipboardData?.items;if(!t)return;const n=[];for(const o of t)if(o.type.startsWith("image/")){const s=o.getAsFile();s&&n.push(s)}n.length>0&&(e.preventDefault(),P(n))}function G(e){e.preventDefault(),e.stopPropagation();const t=document.querySelector(".input-floater");t&&t.classList.add("drag-over")}function J(e){e.preventDefault(),e.stopPropagation();const t=document.querySelector(".input-floater");t&&t.classList.remove("drag-over")}function V(e){e.preventDefault(),e.stopPropagation();const t=document.querySelector(".input-floater");t&&t.classList.remove("drag-over");const n=e.dataTransfer?.files;n&&n.length>0&&P(n)}function Me(){const e=document.getElementById("message-input"),t=document.querySelector(".input-floater"),n=document.getElementById("chat-container");e&&e.addEventListener("paste",R),document.addEventListener("paste",o=>{const s=document.activeElement;(s===e||s?.closest(".input-floater")||s?.closest(".main-stage"))&&R(o)}),t&&(t.addEventListener("dragover",G),t.addEventListener("dragleave",J),t.addEventListener("drop",V)),n&&(n.addEventListener("dragover",G),n.addEventListener("dragleave",J),n.addEventListener("drop",V))}function T(){const e=document.getElementById("image-preview-container");if(d.length===0){e.innerHTML="",e.classList.remove("has-images");return}e.classList.add("has-images"),e.innerHTML=d.map((t,n)=>{const o=Math.round(t.compressedSize/1024),s=o>1024?`${(o/1024).toFixed(1)}MB`:`${o}KB`;return`
            <div class="image-preview" data-index="${n}">
                <img src="data:${t.media_type};base64,${t.data}" alt="Preview ${n+1}">
                <div class="image-preview-info">
                    <span class="image-size">${s}</span>
                </div>
                <button class="remove-image" onclick="removeImage(${n})" title="Remove image">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
        `}).join("")}function De(e){d.splice(e,1),T(),d.length===0&&m("All images removed","info")}function Pe(){d=[],T(),m("All images cleared","info")}async function oe(){const e=document.getElementById("message-input"),t=e.value.trim();if(!t&&d.length===0||B)return;if(!c.apiUrl){m("Please configure API URL in Settings","error"),ee();return}h||ne();const n=g[h],o=document.getElementById("welcome-screen");o&&o.remove();let s=[];d.length>0&&d.forEach(a=>{s.push({type:"image",source:{type:"base64",media_type:a.media_type,data:a.data}})}),t&&s.push({type:"text",text:t});const i={role:"user",content:s.length===1&&s[0].type==="text"?t:s,images:d.length>0?[...d]:void 0};n.messages.push(i),n.messages.length===1&&Le(h,t||"Image message"),ae("user",t,d),e.value="",e.style.height="auto",d=[],T(),N();const l=n.messages.map(a=>({role:a.role,content:a.content}));B=!0,K(!0);const r=document.getElementById("model-select").value;try{v=new AbortController;const a=await fetch(`${c.apiUrl}/v1/messages`,{method:"POST",headers:{"Content-Type":"application/json","anthropic-version":"2023-06-01","ngrok-skip-browser-warning":"true"},body:JSON.stringify({model:r,max_tokens:c.maxTokens,stream:!0,messages:l}),signal:v.signal});if(!a.ok){const u=await a.json();throw new Error(u.error?.message||`HTTP ${a.status}`)}await $e(a,n)}catch(a){a.name==="AbortError"?m("Generation stopped","warning"):(console.error("Error:",a),m(a.message,"error"),He(a.message))}finally{B=!1,v=null,K(!1),x()}}async function $e(e,t){const n=e.body.getReader(),o=new TextDecoder;let s="",i=null,l=null,r=null,a="",u="";for(;;){const{done:b,value:E}=await n.read();if(b)break;s+=o.decode(E,{stream:!0});const _=s.split(`
`);s=_.pop()||"";for(const q of _){if(!q.startsWith("data: "))continue;const O=q.slice(6);if(O!=="[DONE]")try{const p=JSON.parse(O);switch(p.type){case"message_start":i=le("assistant"),document.getElementById("chat-container").appendChild(i);break;case"content_block_start":const k=p.content_block;k.type==="thinking"?(c.showThinking&&(l=se(),i.querySelector(".message-content").appendChild(l)),a=k.thinking||""):k.type==="text"&&(r=document.createElement("div"),r.className="text-content",i.querySelector(".message-content").appendChild(r),u=k.text||"");break;case"content_block_delta":const C=p.delta;C.type==="thinking_delta"&&l?(a+=C.thinking||"",l.querySelector(".thinking-content").textContent=a):C.type==="text_delta"&&r&&(u+=C.text||"",r.innerHTML=ie(u),void 0),c.autoScroll&&$();break;case"content_block_stop":break;case"message_stop":t.messages.push({role:"assistant",content:u,thinking:a||void 0}),t.updatedAt=Date.now();break;case"error":throw new Error(p.error?.message||"Stream error")}}catch(p){if(p.message!=="Stream error")console.warn("Parse error:",p);else throw p}}}}function Ne(){v&&v.abort()}function se(){const e=document.createElement("div");return e.className="thinking-block",e.innerHTML=`
        <div class="thinking-header" onclick="toggleThinking(this)">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
            <span class="thinking-label">üß† Thinking...</span>
        </div>
        <div class="thinking-content"></div>
    `,e}function Fe(e){e.classList.toggle("collapsed"),e.nextElementSibling.classList.toggle("collapsed")}function ae(e,t,n,o){const s=document.getElementById("chat-container"),i=le(e),l=i.querySelector(".message-content");if(e==="assistant"&&o&&c.showThinking){const r=se();r.querySelector(".thinking-content").textContent=o,r.querySelector(".thinking-label").textContent="üß† Thinking process",l.appendChild(r)}if(n&&n.length>0){const r=document.createElement("div");r.className="message-images",n.forEach(a=>{const u=document.createElement("img");u.className="message-image",u.src=`data:${a.media_type};base64,${a.data}`,u.onclick=()=>window.open(u.src,"_blank"),r.appendChild(u)}),l.appendChild(r)}if(t){const r=typeof t=="string"?t:Array.isArray(t)?t.filter(a=>a.type==="text").map(a=>a.text).join(""):"";if(r){const a=document.createElement("div");a.className="text-content",a.innerHTML=ie(r),l.appendChild(a)}}s.appendChild(i),$()}function He(e){const t=document.getElementById("chat-container"),n=document.createElement("div");n.className="message assistant",n.innerHTML=`
        <div class="message-header">
            <div class="message-avatar" style="background: var(--error);">‚ö†Ô∏è</div>
            <span class="message-role">Error</span>
        </div>
        <div class="message-content" style="color: var(--error);">
            ${H(e)}
        </div>
    `,t.appendChild(n),$()}function ie(e){let t=marked.parse(e);return t=t.replace(/<pre><code class="language-(\w+)">/g,'<pre><div class="code-header"><span class="code-lang">$1</span><button class="copy-btn" onclick="copyCode(this)"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy</button></div><code class="language-$1">'),t=t.replace(/<pre><code>/g,'<pre><div class="code-header"><span class="code-lang">code</span><button class="copy-btn" onclick="copyCode(this)"><svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy</button></div><code>'),t}async function _e(e){const n=e.closest("pre").querySelector("code").textContent;try{await navigator.clipboard.writeText(n),e.classList.add("copied"),e.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg> Copied!',setTimeout(()=>{e.classList.remove("copied"),e.innerHTML='<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg> Copy'},2e3)}catch{m("Failed to copy","error")}}function K(e){const t=document.getElementById("send-btn"),n=document.getElementById("stop-btn"),o=document.getElementById("message-input");e?(t.classList.add("hidden"),n.classList.remove("hidden"),o.disabled=!0):(t.classList.remove("hidden"),n.classList.add("hidden"),o.disabled=!1,o.focus())}function $(){const e=document.getElementById("chat-container");e.scrollTop=e.scrollHeight}function re(e){e.style.height="auto",e.style.height=Math.min(e.scrollHeight,200)+"px"}function N(){const e=document.getElementById("message-input"),t=document.getElementById("char-count");t&&e&&(t.textContent=`${e.value.length} characters`)}function qe(e){e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),oe())}function Oe(e){const t=document.getElementById("message-input");t.value=e,t.focus(),re(t),N()}function ze(){const e=document.getElementById("message-input");e&&(e.focus(),e.style.boxShadow="0 0 0 3px rgba(99, 102, 241, 0.3)",setTimeout(()=>{e.style.boxShadow=""},500))}function F(){return`
        <div class="welcome-screen" id="welcome-screen">
            <div class="welcome-logo">üöÄ</div>
            <h1>Welcome to Arafat Chat</h1>
            <p>Powered by Claude & Gemini AI models through Antigravity Proxy</p>
            <div class="quick-actions">
                <button class="quick-action" onclick="setPrompt('Explain quantum computing in simple terms')">
                    <span class="quick-icon">üí°</span>
                    <span>Explain quantum computing</span>
                </button>
                <button class="quick-action" onclick="setPrompt('Write a Python function to sort a list')">
                    <span class="quick-icon">üíª</span>
                    <span>Write Python code</span>
                </button>
                <button class="quick-action" onclick="setPrompt('What are the latest trends in AI?')">
                    <span class="quick-icon">ü§ñ</span>
                    <span>AI trends</span>
                </button>
                <button class="quick-action" onclick="setPrompt('Help me write a professional email')">
                    <span class="quick-icon">‚úâÔ∏è</span>
                    <span>Write an email</span>
                </button>
            </div>
        </div>
    `}async function ce(){const e=document.getElementById("connection-status");if(!e)return;const t=e.querySelector(".status-text");if(t){if(!c.apiUrl){e.className="connection-pill",e.classList.remove("hidden"),t.textContent="API URL not configured";return}e.className="connection-pill connecting",e.classList.remove("hidden"),t.textContent="Connecting...";try{const n=await fetch(`${c.apiUrl}/health`,{headers:{"ngrok-skip-browser-warning":"true"}});if(n.ok){const o=await n.json();e.className="connection-pill connected",t.textContent=`Connected ‚Ä¢ ${o.accounts||"Proxy ready"}`}else throw new Error("Bad response")}catch{e.className="connection-pill error",t.textContent="Connection failed - check Settings"}}}function m(e,t="info"){const n=document.getElementById("toast-container"),o={success:"‚úì",error:"‚úï",warning:"‚ö†",info:"‚Ñπ"},s=document.createElement("div");s.className=`toast ${t}`,s.innerHTML=`
        <span class="toast-icon">${o[t]||o.info}</span>
        <span class="toast-message">${H(e)}</span>
    `,n.appendChild(s),setTimeout(()=>{s.style.opacity="0",s.style.transform="translateX(100%)",setTimeout(()=>s.remove(),300)},4e3)}function H(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}function Ue(){const e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(g,null,2)),t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download","arafat_gpt_history_"+new Date().toISOString()+".json"),document.body.appendChild(t),t.click(),t.remove(),m("Chat history exported successfully","success")}function je(){const e=document.getElementById("right-sidebar"),t=document.getElementById("robot-mascot");e&&(e.classList.toggle("closed"),e.classList.toggle("mobile-visible"),t&&(e.classList.contains("closed")?t.classList.add("hidden-by-sidebar"):t.classList.remove("hidden-by-sidebar")))}function le(e){const t=document.createElement("div");t.className=`message ${e}`;const n=e==="user"?"üë§":"‚ú®";return t.innerHTML=`
        <div class="message-avatar">${n}</div>
        <div class="message-content"></div>
    `,t}window.toggleRightSidebar=je;window.exportData=Ue;window.newChat=ne;window.loadConversation=D;window.deleteConversation=Ce;window.toggleTheme=be;window.openSettings=ee;window.closeSettings=M;window.saveSettings=Ie;window.clearAllData=xe;window.handleImageUpload=Ae;window.removeImage=De;window.clearAllImages=Pe;window.sendMessage=oe;window.stopGeneration=Ne;window.setPrompt=Oe;window.focusChatInput=ze;window.handleKeyDown=qe;window.autoResize=re;window.copyCode=_e;window.toggleThinking=Fe;window.attemptLogin=de;window.togglePasswordVisibility=he;window.logout=fe;window.checkAuth=Q;
